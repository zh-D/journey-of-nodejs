在V8面前，开发者所要具备的责任是如何让垃圾回收机制更高效地工作。

### 作用域

标识符查找

作用域链

变量的主动释放

如果变量是全局变量（不通过var声明或定义在global变量上），由于全局作用域需要直到 进程退出才能释放，此时将导致引用的对象常驻内存（常驻在老生代中）。如果需要释放常驻内 存的对象，可以通过delete操作来删除引用关系。或者将变量重新赋值，让旧的对象脱离引用关 系。在接下来的老生代内存清除和整理的过程中，会被回收释放。下面为示例代码：

```javascript
global.foo = "I am global object"; 
console.log(global.foo); // => "I am global object" 
delete global.foo; 
// 或者重新赋值
global.foo = undefined; // or null 
console.log(global.foo); // => undefined 
```

同样，如果在非全局作用域中，想主动释放变量引用的对象，也可以通过这样的方式。虽然 delete操作和重新赋值具有相同的效果，但是**在V8中通过delete删除对象的属性有可能干扰V8 的优化，所以通过赋值方式解除引用更好。**

### 闭包

闭包是JavaScript的高级特性，利用它可以产生很多巧妙的效果。它的问题在于，一旦有变量引用这个中间函数，这个中间函数将不会释放，同时也会使原始的作用域不会得到释放，作用域中产生的内存占用也不会得到释放。除非不再有引用，才会逐步释放。

### 总结

**在正常的JavaScript执行中，无法立即回收的内存有闭包和全局变量引用这两种情况。由于 V8的内存限制，要十分小心此类变量是否无限制地增加，因为它会导致老生代中的对象增多。**