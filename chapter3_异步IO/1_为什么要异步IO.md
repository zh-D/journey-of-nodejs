异步在 Web 2.0 浪潮中，它伴随着AJAX的第一个A（Asynchronous）席卷了Web。

异步早就存在于操作系统的底层。在底层系统中，异步通过信号量、消息等方式 有了广泛的应用。意外的是，在绝大多数高级编程语言中，异步并不多见，疑似被屏蔽了一般。 造成这个现象的主要原因也许令人惊讶：程序员不太适合通过异步来进行程序设计。

**在众多高级编程语言或运行平台中，将异步作为主要编程方式和设计理念的，Node是首个。**

关于为什么要异步 IO，要从用户体验和资源分配这两个方面说起。

### 用户体验

前端通过异步可以消除掉 UI 阻塞的现象。如果前端要获取两个资源，对比同步和异步两者的时间总消耗，前者为M+N，后者为max（M, N）。

随着应用复杂性的增加，情景将会变成M + N + …和max（M, N, …）。另一方面，随着网站或应用不断膨胀，数据将会分布到多台服务器上，分布式将会是 常态。分布也意味着M与N的值会线性增长，这也会放大异步和同步在性能方面的差异。

**I/O是昂贵的， 分布式I/O是更昂贵的。只有后端能够快速响应资源，才能让前端的体验变好。**

### 资源分配

我们知道计算机在发展过程中将组件进行了抽象，分为I/O设备和计算设备。

假设业务场景中有**一组互不相关的任务**需要完成，现行的主流方法有以下两种。

- 单线程串行依次执行
- 多线程并行完成

如果创建**多线程的开销小于并行执行**，那么多线程的方式是首选的。**多线程的代价在于创建线程和执行期线程上下文切换的开销较大**。另外，在复杂的业务中，**多线程编程经常面临锁、状态同步等问题**，这是多线程被诟病的主要原因。但是**多线程在多核CPU上能够有效提升CPU的利用率**，这个优势是毋庸置疑的。

**单线程顺序执行任务的方式比较符合编程人员按顺序思考的思维方式**。它依然是最主流的编程方式，因为它易于表达。但是**串行执行的缺点在于性能**，任意一个略慢的任务都会导致后续执行代码被阻塞。在计算机资源中，通常**I/O 与 CPU 计算之间是可以并行进行**的。但是**同步的编程模型导致的问题是，I/O的进行会让后续任务等待，这造成资源不能被更好地利用。**

有的服务器为了提升响应能力，会通过**启动多个工作进程来为更多的用户服务**。**但是一组任务无法分发到多个进程分开处理**。就像是加三倍服务器，占用更多资源来提升服务速度，他没能真正改善问题。

添加硬件资源是一种提升服务质量的方式，但它不是唯一的方式。

单线程同步编程模型会因阻塞I/O导致硬件资源得不到更优的使用。多线程编程模型也因为编程中的死锁、状态同步等问题让开发人员头疼。**Node在两者之间给出了它的方案：利用单线程，远离多线程死锁、状态同步等问题；利用异 步I/O，让单线程远离阻塞，以更好地使用CPU。**

异步I/O可以算作Node的特色，因为它是首个大规模将异步I/O应用在应用层上的平台，它力 求在单线程上将资源分配得更高效。

**为了弥补单线程无法利用多核CPU**的缺点，Node提供了类似前端浏览器中 Web Workers 的子 进程，该子进程可以通过工**作进程高效地利用 CPU 和 I/O**。

异步I/O的提出是期望I/O的调用不再阻塞后续运算，将原有等待I/O完成的这段时间分配给其余需要的业务去执行。